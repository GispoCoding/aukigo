(this.webpackJsonpaukigo=this.webpackJsonpaukigo||[]).push([[0],{150:function(e,t,a){e.exports=a(165)},155:function(e,t,a){},156:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(76),o=a.n(c),i=(a(155),a(61)),l=(a(156),a(157),a(206)),s=a(130),u=a(191),m=a(131),p=a(126),d=a(129),f=a(114),b=a(128),E=a(6),h=a(112),v=a(92),g=a(108),O=a(91),w=a(127),j=a(39),x={polyStyle:new h.b({stroke:new v.a({color:"orange",width:1}),fill:new g.a({color:"rgba(20,20,20,0.9"})}),pointStyle:new h.b({image:new O.a({radius:5,fill:new g.a({color:"#666666"}),stroke:new v.a({color:"#ffffff",width:1})})})};var y=function(e){var t=e.basemaps,a=e.tilesets,c=Object(n.useState)(),o=Object(i.a)(c,2),h=o[0],v=o[1],g=t.WMTS,O=Object(n.useState)(),y=Object(i.a)(O,2),S=(y[0],y[1]),k={height:"100%",width:"100%"},N=Object(n.useState)(),R=Object(i.a)(N,2),_=R[0],C=R[1],P=Object(n.useRef)(null),T=Object(n.useRef)(null);return Object(n.useEffect)((function(){v(new l.a({target:void 0,controls:[],view:new s.a({center:[2478699.953232,8501593.815476],zoom:14})}))}),[]),Object(n.useEffect)((function(){return h&&(null===h||void 0===h||h.setTarget(P.current),C(new u.a({element:T.current,autoPan:!0,autoPanAnimation:{duration:250},positioning:j.a.CENTER_CENTER}))),function(){return null===h||void 0===h?void 0:h.setTarget(void 0)}}),[h]),Object(n.useEffect)((function(){h&&_&&(h.getOverlays().getLength()||h.addOverlay(_))}),[h,_]),Object(n.useEffect)((function(){h&&_&&h.on("click",(function(e){if(null!==T.current){var t=h.getFeaturesAtPixel(e.pixel);if(0!==t.length){_.setPosition(e.coordinate),T.current.hidden=!1;var a=t[0].getProperties();T.current.innerHTML=function(e){var t=e.name_fi?e.name_fi:e.name,a=e.website?e.website:"",n="<h1>".concat(t,"</h1><a href=").concat(a,">").concat(a,"</a><table>");return Object.keys(e).forEach((function(t){n+="<tr><td>".concat(t,"<td><td>").concat(e[t],"</td><tr />")})),n+="</table>"}(a)}else T.current.hidden=!0}}))}),[h,_]),Object(n.useEffect)((function(){if(h){var e=g[0],t=new b.a;fetch(e.url).then((function(e){return e.text()})).then((function(a){var n=t.read(a),r=Object(f.b)(n,{layer:e.layer,matrixSet:e.tile_matrix_set});h.addLayer(new m.a({source:new f.a(r),zIndex:-1}))}));var n=a[0];S(n);var r=function(e){var t={attributions:e.attribution,format:new w.a,maxZoom:e.maxzoom,minZoom:e.minzoom,url:e.tiles[0]};return new d.a(t)}(n),c=new p.a({source:r,style:x.pointStyle});h.addLayer(c);var o=Object(E.m)([n.center[0],n.center[1]],"EPSG:4326","EPSG:3857"),i=new s.a({center:o,zoom:n.center[2]});h.setView(i)}}),[h,g,a]),r.a.createElement("div",{style:k},r.a.createElement("div",{style:k,ref:P}),r.a.createElement("div",{ref:T,style:{border:"1px solid black",backgroundColor:"#FFF"}}))},S=a(194),k=a(192),N=a(209),R=a(205),_=a(68),C=a(195),P=a(196),T=a(207),I=a(197),B=a(208),L=a(69),G=a(198),W=a(199),z=Object(k.a)((function(e){var t;return Object(N.a)({root:(t={backgroundColor:e.palette.primary.main,flexGrow:1,margin:"30px auto 0 auto",pointerEvents:"auto"},Object(_.a)(t,e.breakpoints.up("md"),{margin:"30px 30px 0 auto"}),Object(_.a)(t,e.breakpoints.down("sm"),{paddingRight:0}),t),menuButton:{marginRight:e.spacing(2)},title:Object(_.a)({marginLeft:"16px",flexGrow:1,pointerEvents:"none",userSelect:"none",display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(_.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(L.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(L.b)(e.palette.common.white,.25)},margin:"8px 0 8px 8px",width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(_.a)({padding:e.spacing(2,1,2,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})})}));function A(){var e=z();return r.a.createElement(S.a,{className:e.root,item:!0,md:6,sm:11,xs:12},r.a.createElement(C.a,{position:"static"},r.a.createElement(P.a,{disableGutters:!0},r.a.createElement(I.a,{className:e.title,variant:"h6",noWrap:!0},"aukigo"),r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(G.a,null)),r.a.createElement(B.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})),r.a.createElement(T.a,{color:"inherit"},r.a.createElement(W.a,null)))))}var D=a(167),F=a(200),H=a(201),K=a(202),M=a(203),V=a(204),J=Object(k.a)((function(e){return Object(N.a)({root:Object(_.a)({backgroundColor:e.palette.primary.main,zIndex:100,margin:"auto",pointerEvents:"auto",flexGrow:1},e.breakpoints.up("md"),{position:"absolute",bottom:"30px",right:"30px"}),layerSelButton:{minWidth:"100%"}})}));function U(){var e=J();return r.a.createElement(S.a,{alignItems:"center",className:e.root,container:!0,item:!0,direction:"row",justify:"space-evenly",spacing:3,md:6,sm:11,xs:12},r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement(D.a,null,r.a.createElement(T.a,{className:e.layerSelButton},r.a.createElement(F.a,null)))),r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement(D.a,null,r.a.createElement(T.a,{className:e.layerSelButton},r.a.createElement(H.a,null)))),r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement(D.a,null,r.a.createElement(T.a,{className:e.layerSelButton},r.a.createElement(K.a,null)))),r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement(D.a,null,r.a.createElement(T.a,{className:e.layerSelButton},r.a.createElement(M.a,null)))),r.a.createElement(S.a,{item:!0,xs:!0},r.a.createElement(D.a,null,r.a.createElement(T.a,{className:e.layerSelButton},r.a.createElement(V.a,null)))))}var Z=a(125),$=a(110),q=a(109),Q=Object(Z.a)({palette:{primary:$.a,secondary:q.a},custom:{variable:"#000"}}),X=Object(k.a)((function(){return Object(N.a)({root:{flexGrow:1,position:"fixed",top:0,left:0,minHeight:"100vh",pointerEvents:"none",zIndex:100},header:{flexGrow:1}})}));function Y(){var e=X();return r.a.createElement(R.a,{theme:Q},r.a.createElement(S.a,{container:!0,item:!0,className:e.root,direction:"column",justify:"flex-start",spacing:0,xs:12},r.a.createElement(S.a,{item:!0,className:e.header},r.a.createElement(A,null)),r.a.createElement(S.a,{item:!0},r.a.createElement(U,null))))}var ee=a(113),te=a.n(ee),ae=a(124),ne=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER;function re(){return(re=Object(ae.a)(te.a.mark((function e(){var t,a,n,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(ne,"/api/capabilities"),a={headers:{Accept:"application/json"}},e.prev=2,e.next=5,fetch(t,a);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(2),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}var ce=function(){return re.apply(this,arguments)};var oe=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),l=Object(i.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(),p=Object(i.a)(m,2),d=p[0],f=p[1],b=Object(n.useState)([]),E=Object(i.a)(b,2),h=E[0],v=E[1];return Object(n.useEffect)((function(){ce().then((function(e){u(e)}))}),[]),Object(n.useEffect)((function(){s&&(f(s.basemaps),v(s.tilesets))}),[s]),Object(n.useEffect)((function(){d&&h&&c(!1)}),[d,h]),a?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"App"},r.a.createElement(Y,null),r.a.createElement(y,{basemaps:d,tilesets:h}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[150,1,2]]]);
//# sourceMappingURL=main.a98a9049.chunk.js.map